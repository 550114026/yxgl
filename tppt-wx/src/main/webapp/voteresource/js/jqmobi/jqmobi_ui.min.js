function SwipeHandle(q, f) {
    var g = function() {};
    var z = function(H) {
        setTimeout(H || g, 0)
    };
    var G = {
        addEventListener: !!window.addEventListener,
        touch: ("ontouchstart" in window) || window.DocumentTouch && document instanceof DocumentTouch,
        transitions: (function(H) {
            var J = ["transitionProperty", "WebkitTransition", "MozTransition", "OTransition", "msTransition"];
            for (var I in J) {
                if (H.style[J[I]] !== undefined) {
                    return true
                }
            }
            return false
        })(document.createElement("swipe"))
    };
    if (!q) {
        return
    }
    var c = q.children[0];
    var w, d, v, h;
    f = f || {};
    var o = parseInt(f.startSlide, 10) || 0;
    var A = f.speed || 300;
    f.continuous = f.continuous !== undefined ? f.continuous: true;
    function r() {
        w = c.children;
        h = w.length;
        if (w.length < 2) {
            f.continuous = false
        }
        if (G.transitions && f.continuous && w.length < 3) {
            c.appendChild(w[0].cloneNode(true));
            c.appendChild(c.children[1].cloneNode(true));
            w = c.children
        }
        d = new Array(w.length);
        v = q.getBoundingClientRect().width || q.offsetWidth || 320;
        if (w.length !== 0) {
            c.style.width = (w.length * v) + "px"
        }
        var K = w.length;
        while (K--) {
            var I = w[K];
            I.style.width = v + "px";
            I.setAttribute("data-index", K);
            if (G.transitions) {
                I.style.left = (K * -v) + "px";
                u(K, o > K ? -v: (o < K ? v: 0), 0)
            }
        }
        if (f.continuous && G.transitions) {
            u(k(o - 1), -v, 0);
            u(k(o + 1), v, 0)
        }
        if (!G.transitions) {
            c.style.left = (o * -v) + "px"
        }
        q.style.visibility = "visible";
        if (f.isOpenNextAndPrevious) {
            if (q.querySelector(".imageSliderNext")) {
                return
            }
            var J = document.createElement("div");
            J.className = "nextAndPreviousIcon imageSliderNext";
            J.style.marginTop = ( - Fai.top._htmlFontSize * 1.75) / 2 + "px";
            var H = document.createElement("div");
            H.className = "nextAndPreviousIcon imageSliderPrevious";
            H.style.top = 50 + "%";
            H.style.marginTop = ( - Fai.top._htmlFontSize * 1.75) / 2 + "px";
            J.addEventListener("click",
                function() {
                    t()
                },
                false);
            H.addEventListener("click",
                function() {
                    s()
                },
                false);
            q.appendChild(J);
            q.appendChild(H)
        }
    }
    if (f.bulletsClick) {
        var e = q.querySelector(".bullets");
        if (e) {
            var y = e.querySelectorAll("li");
            for (var m = 0; m < y.length; m++) {
                y[m].onclick = (function(H) {
                    return function() {
                        a(H);
                        F += f.auto || 0
                    }
                })(m)
            }
        }
    }
    function s() {
        if (f.continuous) {
            a(o - 1)
        } else {
            if (o) {
                a(o - 1)
            }
        }
    }
    function t() {
        if (f.continuous) {
            a(o + 1)
        } else {
            if (o < w.length - 1) {
                a(o + 1)
            }
        }
    }
    function k(H) {
        return (w.length + (H % w.length)) % w.length
    }
    function a(L, I) {
        if (o == L) {
            return
        }
        if (G.transitions) {
            var K = Math.abs(o - L) / (o - L);
            if (f.continuous) {
                var H = K;
                K = -d[k(L)] / v;
                if (K !== H) {
                    L = -K * w.length + L
                }
            }
            var J = Math.abs(o - L) - 1;
            while (J--) {
                u(k((L > o ? L: o) - J - 1), v * K, 0)
            }
            L = k(L);
            u(o, v * K, I || A);
            u(L, 0, I || A);
            if (f.continuous) {
                u(k(L - K), -(v * K), 0)
            }
        } else {
            L = k(L);
            l(o * -v, L * -v, I || A)
        }
        o = L;
        z(f.callback && f.callback(o, w[o]))
    }
    function u(H, J, I) {
        p(H, J, I);
        d[H] = J
    }
    function p(I, L, K) {
        var H = w[I];
        var J = H && H.style;
        if (!J) {
            return
        }
        J.webkitTransitionDuration = J.MozTransitionDuration = J.msTransitionDuration = J.OTransitionDuration = J.transitionDuration = K + "ms";
        J.webkitTransform = "translate(" + L + "px,0)translateZ(0)";
        J.msTransform = J.MozTransform = J.OTransform = "translateX(" + L + "px)"
    }
    function l(L, K, H) {
        if (!H) {
            c.style.left = K + "px";
            return
        }
        var J = +new Date;
        var I = setInterval(function() {
                var M = +new Date - J;
                if (M > H) {
                    c.style.left = K + "px";
                    if (F) {
                        C()
                    }
                    f.transitionEnd && f.transitionEnd.call(event, o, w[o]);
                    clearInterval(I);
                    return
                }
                c.style.left = (((K - L) * (Math.floor((M / H) * 100) / 100)) + L) + "px"
            },
            4)
    }
    var F = f.auto || 0;
    var B;
    function C() {
        B = setTimeout(t, F)
    }
    function x() {
        F = 0;
        clearTimeout(B)
    }
    var i = {};
    var D = {};
    var E;
    var b = {
        handleEvent: function(H) {
            switch (H.type) {
                case "touchstart":
                    this.start(H);
                    break;
                case "touchmove":
                    this.move(H);
                    break;
                case "touchend":
                    z(this.end(H));
                    break;
                case "webkitTransitionEnd":
                case "msTransitionEnd":
                case "oTransitionEnd":
                case "otransitionend":
                case "transitionend":
                    z(this.transitionEnd(H));
                    break;
                case "resize":
                    z(r.call());
                    break
            }
            if (f.stopPropagation) {
                H.stopPropagation()
            }
        },
        start: function(H) {
            var I = H.touches[0];
            i = {
                x: I.pageX,
                y: I.pageY,
                time: +new Date
            };
            E = undefined;
            D = {};
            c.addEventListener("touchmove", this, false);
            c.addEventListener("touchend", this, false)
        },
        move: function(H) {
            if (H.touches.length > 1 || H.scale && H.scale !== 1) {
                return
            }
            if (f.disableScroll) {
                H.preventDefault()
            }
            var I = H.touches[0];
            D = {
                x: I.pageX - i.x,
                y: I.pageY - i.y
            };
            if (typeof E == "undefined") {
                E = !!(E || Math.abs(D.x) < Math.abs(D.y))
            }
            if (!E) {
                H.preventDefault();
                x();
                if (f.continuous) {
                    p(k(o - 1), D.x + d[k(o - 1)], 0);
                    p(o, D.x + d[o], 0);
                    p(k(o + 1), D.x + d[k(o + 1)], 0)
                } else {
                    D.x = D.x / ((!o && D.x > 0 || o == w.length - 1 && D.x < 0) ? (Math.abs(D.x) / v + 1) : 1);
                    p(o - 1, D.x + d[o - 1], 0);
                    p(o, D.x + d[o], 0);
                    p(o + 1, D.x + d[o + 1], 0)
                }
            }
        },
        end: function(J) {
            var L = +new Date - i.time;
            var I = Number(L) < 250 && Math.abs(D.x) > 20 || Math.abs(D.x) > v / 2;
            var H = !o && D.x > 0 || o == w.length - 1 && D.x < 0;
            if (f.continuous) {
                H = false
            }
            var K = D.x < 0;
            if (!E) {
                if (I && !H) {
                    if (K) {
                        if (f.continuous) {
                            u(k(o - 1), -v, 0);
                            u(k(o + 2), v, 0)
                        } else {
                            u(o - 1, -v, 0)
                        }
                        u(o, d[o] - v, A);
                        u(k(o + 1), d[k(o + 1)] - v, A);
                        o = k(o + 1)
                    } else {
                        if (f.continuous) {
                            u(k(o + 1), v, 0);
                            u(k(o - 2), -v, 0)
                        } else {
                            u(o + 1, v, 0)
                        }
                        u(o, d[o] + v, A);
                        u(k(o - 1), d[k(o - 1)] + v, A);
                        o = k(o - 1)
                    }
                    f.callback && f.callback(o, w[o])
                } else {
                    if (f.continuous) {
                        u(k(o - 1), -v, A);
                        u(o, 0, A);
                        u(k(o + 1), v, A)
                    } else {
                        u(o - 1, -v, A);
                        u(o, 0, A);
                        u(o + 1, v, A)
                    }
                }
            }
            c.removeEventListener("touchmove", b, false);
            c.removeEventListener("touchend", b, false)
        },
        transitionEnd: function(H) {
            if (parseInt(H.target.getAttribute("data-index"), 10) == o) {
                if (F) {
                    C()
                }
                f.transitionEnd && f.transitionEnd.call(H, o, w[o])
            }
        }
    };
    r();
    if (F) {
        C()
    }
    if (G.addEventListener) {
        if (G.touch) {
            c.addEventListener("touchstart", b, false)
        }
        if (G.transitions) {
            c.addEventListener("webkitTransitionEnd", b, false);
            c.addEventListener("msTransitionEnd", b, false);
            c.addEventListener("oTransitionEnd", b, false);
            c.addEventListener("otransitionend", b, false);
            c.addEventListener("transitionend", b, false)
        }
    } else {}
    return {
        setup: function() {
            r()
        },
        slide: function(I, H) {
            x();
            a(I, H)
        },
        prev: function() {
            x();
            s()
        },
        next: function() {
            x();
            t()
        },
        getPos: function() {
            return o
        },
        getNumSlides: function() {
            return h
        },
        kill: function() {
            x();
            c.style.width = "auto";
            c.style.left = 0;
            var I = w.length;
            while (I--) {
                var H = w[I];
                H.style.width = "100%";
                H.style.left = 0;
                if (G.transitions) {
                    p(I, 0, 0)
                }
            }
            if (G.addEventListener) {
                c.removeEventListener("touchstart", b, false);
                c.removeEventListener("webkitTransitionEnd", b, false);
                c.removeEventListener("msTransitionEnd", b, false);
                c.removeEventListener("oTransitionEnd", b, false);
                c.removeEventListener("otransitionend", b, false);
                c.removeEventListener("transitionend", b, false);
                window.removeEventListener("resize", b, false)
            } else {
                window.onresize = null
            }
        }
    }
} (function(a) {
    a.fn.swipehandle = function(b, c) {
        return new SwipeHandle(b, c)
    }
})(jm);